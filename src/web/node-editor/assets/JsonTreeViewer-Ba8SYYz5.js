import{A as e,At as t,B as n,Dt as r,Et as i,F as a,M as o,N as s,P as c,V as l,bt as u,et as d,it as f,j as p,k as m,kt as h,nt as g,s as _,ut as v,z as y}from"./index-BxA7zcD7.js";import{t as b}from"./_plugin-vue_export-helper-DEnkkObV.js";import{a as x,i as S,n as C,o as w,r as T,t as E}from"./IconCopyReference-BUIr6xaN.js";var D={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`w-4 h-4`},O=l({name:`IconCopyPath`,__name:`IconCopyPath`,setup(e){return(e,t)=>(d(),a(`svg`,D,[...t[0]||=[o(`path`,{d:`M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71`},null,-1),o(`path`,{d:`M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71`},null,-1)]]))}}),ee={class:`json-tree-node-wrapper`},te={class:`flex items-center gap-1.5`},ne={key:0,class:`text-purple-600 text-xs`},re={key:1,class:`text-emerald-600 text-xs`},ie={key:2,class:`text-blue-600 text-xs`},ae={key:3,class:`text-[10px] opacity-70`},oe={key:4,class:`text-[10px] opacity-70`},se={key:5,class:`text-[10px] opacity-70`},ce={class:`json-tree-node`},le={class:`json-indent`},ue={class:`json-content`},de={class:`json-key`},k={class:`json-item-count text-gray-400 ml-2`},A={key:0,class:`json-comma`},j={key:0,class:`json-comma`},M={class:`json-tree-node`},N={class:`json-indent`},P={class:`json-content`},F={key:0,class:`json-comma`},I=l({name:`JsonTreeNode`,__name:`JsonTreeNode`,props:{data:{},keyName:{default:null},depth:{default:0},path:{default:``},isLast:{type:Boolean,default:!0},parentIsLast:{type:Boolean,default:!0},enableDrag:{type:Boolean,default:!0},expandAll:{type:Boolean,default:!1}},setup(l){let b=l,D=u(b.expandAll||b.depth<2),I=p(()=>b.data!==null&&typeof b.data==`object`),L=p(()=>Array.isArray(b.data)),R=p(()=>Array.isArray(b.data)?`[`:typeof b.data==`object`&&b.data!==null?`{`:``),z=p(()=>Array.isArray(b.data)?`]`:typeof b.data==`object`&&b.data!==null?`}`:``),B=p(()=>I.value?(Array.isArray(b.data),b.data):[]),V=p(()=>{if(Array.isArray(b.data)){let e=b.data.length;return e===1?`1 item`:`${e} items`}if(typeof b.data==`object`&&b.data!==null){let e=Object.keys(b.data).length;return e===1?`1 key`:`${e} keys`}return``}),H=(e,t)=>L.value?t:String(e),fe=(e,t)=>{if(L.value)return b.path?`${b.path}[${t}]`:`[${t}]`;let n=String(e);return b.path?`${b.path}.${n}`:n},pe=e=>{let t=B.value;return Array.isArray(t)?e===t.length-1:e===Object.keys(t).length-1},U=e=>b.isLast?b.isLast&&b.parentIsLast===!1?e<b.depth:b.isLast&&I.value&&D.value?b.depth===0?!1:e<b.depth:b.isLast&&b.depth>0?e<b.depth:!1:!0,W=()=>{D.value=!D.value},G=p(()=>b.data===null?`null`:Array.isArray(b.data)?`array`:typeof b.data),K=p(()=>{switch(G.value){case`string`:return`"${b.data}"`;case`null`:return`null`;case`boolean`:case`number`:return String(b.data);default:return String(b.data)}}),me=p(()=>({string:`json-value-string`,number:`json-value-number`,boolean:`json-value-boolean`,null:`json-value-null`})[G.value]||``),he=p(()=>{let e=[];if(b.keyName===null)return e;if(e.push({label:`复制 Key`,value:b.keyName,color:`#a855f7`,icon:T,layout:`horizontal`,onClick:()=>{$(b.keyName)}}),b.path){e.push({label:`复制路径`,value:b.path,color:`#d97706`,icon:O,layout:`horizontal`,onClick:()=>{$(b.path)}});let t=`{{ ${b.path} }}`;e.push({label:`复制引用`,value:t,color:`#0284c7`,icon:E,layout:`vertical`,onClick:()=>{$(t)}})}return e}),ge=p(()=>{let e=[];if(e.push({label:`复制 Value`,value:K.value,color:`#059669`,icon:C,layout:`horizontal`,onClick:()=>{$(String(b.data))}}),b.keyName&&e.push({label:`复制 Key`,value:b.keyName,color:`#a855f7`,icon:T,layout:`horizontal`,onClick:()=>{$(b.keyName)}}),b.path){e.push({label:`复制路径`,value:b.path,color:`#d97706`,icon:O,layout:`horizontal`,onClick:()=>{$(b.path)}});let t=`{{ ${b.path} }}`;e.push({label:`复制引用`,value:t,color:`#0284c7`,icon:E,layout:`vertical`,onClick:()=>{$(t)}})}return e}),{isDragging:_e,showDragFollower:ve,dragPosition:q,dropTargetState:J,isHighlighted:Y,isCtrlPressed:X,dragFollowerStyle:Z,startDrag:ye}=x({eventName:`variable-drop`,enableHighlight:!0}),be=e=>{if(!b.enableDrag||b.keyName===null)return;e.stopPropagation();let t=b.path?`{{ ${b.path} }}`:``,n={key:b.keyName,path:b.path,value:b.data,reference:t,isReplace:e.ctrlKey||e.metaKey};ye(e,n)},Q=_();function $(e){navigator.clipboard.writeText(e).then(()=>{Q.success(`已复制到剪贴板`)}).catch(()=>{Q.error(`复制失败`)})}return(u,p)=>{let _=f(`JsonTreeNode`,!0);return d(),a(`div`,ee,[(d(),s(e,{to:`body`},[i(J)===`default`?c(``,!0):(d(),a(`div`,{key:0,class:`fixed pointer-events-none z-10001 w-8 h-8 flex items-center justify-center`,style:h({left:i(q).x+`px`,top:i(q).y+`px`,transform:`translate(-50%, -50%)`})},[n(w,{class:`w-5 h-5 text-slate-800`})],4)),i(ve)?(d(),a(`div`,{key:1,class:r([`fixed pointer-events-none z-10000 px-3 py-1 text-xs font-medium rounded-lg shadow-lg backdrop-blur`,[i(X)?`bg-purple-100/95 border-2 border-purple-400 text-purple-700`:i(J)===`empty`?`bg-emerald-100/95 border-2 border-emerald-400 text-emerald-700`:i(J)===`hasContent`?`bg-blue-100/95 border-2 border-blue-400 text-blue-700`:`bg-red-100/95 border-2 border-red-400 text-red-700`]]),style:h(i(Z))},[o(`div`,te,[i(X)?(d(),a(`span`,ne,`⟳`)):i(J)===`empty`?(d(),a(`span`,re,`⇱`)):i(J)===`hasContent`?(d(),a(`span`,ie,`↓`)):c(``,!0),y(` `+t(l.keyName)+` `,1),i(X)?(d(),a(`span`,ae,`替换`)):i(J)===`empty`?(d(),a(`span`,oe,`吸附左侧`)):i(J)===`hasContent`?(d(),a(`span`,se,`插入位置`)):c(``,!0)])],6)):c(``,!0)])),o(`div`,ce,[o(`div`,le,[(d(!0),a(m,null,g(l.depth,e=>(d(),a(`div`,{key:e,class:r([`json-indent-unit`,{"has-line":U(e-1)}])},null,2))),128))]),o(`span`,ue,[l.keyName===null?c(``,!0):(d(),s(S,{key:0,items:he.value},{default:v(()=>[o(`span`,de,[o(`span`,{class:r([`json-key-content`,{"cursor-grab active:cursor-grabbing":b.enableDrag,"cursor-default":!b.enableDrag,"is-dragging":i(_e),"is-highlight":i(Y)}]),onMousedown:be},` "`+t(l.keyName)+`" `,35),p[0]||=o(`span`,{class:`json-colon`},`: `,-1)])]),_:1},8,[`items`])),I.value?(d(),a(m,{key:1},[o(`span`,{class:`json-brackets cursor-pointer`,onClick:W},t(R.value),1),D.value?c(``,!0):(d(),a(m,{key:0},[o(`span`,{class:`json-collapsed-content cursor-pointer text-gray-400 hover:text-gray-600 transition-colors`,onClick:W},` ... `),o(`span`,{class:`json-brackets cursor-pointer`,onClick:W},t(z.value),1),o(`span`,k,` // `+t(V.value),1),l.isLast?c(``,!0):(d(),a(`span`,A,`,`))],64))],64)):(d(),a(m,{key:2},[n(S,{items:ge.value},{default:v(()=>[o(`span`,{class:r([`json-value`,[me.value,{"is-highlight":i(Y)}]])},t(K.value),3)]),_:1},8,[`items`]),l.isLast?c(``,!0):(d(),a(`span`,j,`,`))],64))])]),D.value&&I.value?(d(),a(m,{key:0},[(d(!0),a(m,null,g(B.value,(e,t,n)=>(d(),s(_,{key:H(t,n),data:e,"key-name":L.value?null:String(t),depth:l.depth+1,path:fe(t,n),"is-last":pe(n),"parent-is-last":l.isLast,"enable-drag":b.enableDrag,"expand-all":b.expandAll},null,8,[`data`,`key-name`,`depth`,`path`,`is-last`,`parent-is-last`,`enable-drag`,`expand-all`]))),128)),o(`div`,M,[o(`div`,N,[(d(!0),a(m,null,g(l.depth,e=>(d(),a(`div`,{key:e,class:r([`json-indent-unit`,{"has-line":U(e-1)}])},null,2))),128))]),o(`span`,P,[o(`span`,{class:`json-brackets cursor-pointer`,onClick:W},t(z.value),1),l.isLast?c(``,!0):(d(),a(`span`,F,`,`))])])],64)):c(``,!0)])}}}),L=b(I,[[`__scopeId`,`data-v-4fb9ad2f`]]),R={class:`json-tree-viewer`},z={class:`json-tree-list`},B=l({__name:`JsonTreeViewer`,props:{data:{},enableDrag:{type:Boolean,default:!0},expandAll:{type:Boolean,default:!1}},setup(e){let t=e;return(e,r)=>(d(),a(`div`,R,[o(`div`,z,[n(L,{data:t.data,depth:0,path:``,"is-last":!0,"enable-drag":t.enableDrag,"expand-all":t.expandAll},null,8,[`data`,`enable-drag`,`expand-all`])])]))}}),V=b(B,[[`__scopeId`,`data-v-d8f746e1`]]);export{V as t};