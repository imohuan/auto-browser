import{$ as e,A as t,At as n,B as r,Dt as i,E as a,F as o,M as s,N as c,O as l,P as u,Q as d,R as f,S as p,V as m,at as h,bt as g,dt as _,et as v,j as y,k as b,kt as x,nt as S,rt as C,s as w,ut as T}from"./index-BxA7zcD7.js";import{n as E}from"./events-D1p43SY5.js";import{t as D}from"./_plugin-vue_export-helper-DEnkkObV.js";var O={},k={t:`1761820393760`,class:`icon`,viewBox:`0 0 1024 1024`,version:`1.1`,xmlns:`http://www.w3.org/2000/svg`,"p-id":`15758`,width:`200`,height:`200`};function A(e,t){return v(),o(`svg`,k,[...t[0]||=[s(`path`,{d:`M320.512 256h92.48v46.08h-92.48V256z m469.184 113.504h46.72v46.08h-46.72v-46.08z m46.72 46.08h46.08V739.52h-46.08V415.584zM790.304 739.52h46.08v139.2h-46.08v-139.2z m-46.08 232.32H373.056v-93.12h-46.08v139.2h463.296v-139.2h-46.08v93.12z m-463.328-185.28h46.08v92.16h-46.08v-92.16z m-46.08-92.224h46.08v92.192h-46.08v-92.192z m-46.112-92.192h46.08v92.16h-46.08v-92.16z m-46.08-48.416h46.08v48.416h-46.08v-48.416z m155.68-59.2v-46.08H188.928l-46.336 105.28h46.336l25.216-59.2h84.16z`,fill:`#515151`,"p-id":`15759`},null,-1),s(`path`,{d:`M280.896 476.608v172.8h46.08V302.08h-46.08v174.464z m184.704-13.6V277.312h92.992V231.2H465.6v6.912h-46.08v224.896h46.08z m139.104 0v-139.616h92.8v-46.08h-138.88v185.696h46.08z m138.88 45.984v-139.52h46.112v-46.08h-92.192v185.6h46.08z`,fill:`#515151`,"p-id":`15760`},null,-1)]])}var j=D(O,[[`render`,A]]);function M(e={}){let{dragThreshold:t=5,eventName:n=`editable-drop`,enableHighlight:r=!1,onDragStart:i,onDragEnd:a}=e,o=g(!1),s=g(!1),c=g({x:0,y:0}),l=g({x:0,y:0}),u=g(`default`),d=g(null),f=g(!1),p=g(!1),m=null;function h(e){return e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement?e.value:e.textContent?.replace(/\u00a0/g,` `).replace(/\u200B/g,``)||``}let _=[],v=`border-green-600!`,b=()=>{_.forEach(e=>{e.classList.remove(v)}),_.length=0},x=e=>{let t=e.closest(`.variable-text-input`);b(),t&&!_.includes(t)&&(_.push(t),t.classList.add(v))},S=y(()=>{let e=d.value;if(e&&u.value===`empty`){x(e);let t=e.getBoundingClientRect();return{left:t.left-8+`px`,top:t.top+t.height/2+`px`,transform:`translate(12px, -50%)`}}return e&&u.value===`hasContent`?(x(e),{left:c.value.x+`px`,top:c.value.y+`px`}):(b(),{left:c.value.x+`px`,top:c.value.y+`px`,transform:`translate(-50%, -100%)`})});function C(e){o.value&&(e.ctrlKey||e.metaKey)&&(p.value=!0)}function w(e){o.value&&!e.ctrlKey&&!e.metaKey&&(p.value=!1)}function T(e){if(!o.value)return;p.value=e.ctrlKey||e.metaKey,c.value={x:e.clientX,y:e.clientY};let n=e.clientX-l.value.x,r=e.clientY-l.value.y;if(Math.sqrt(n*n+r*r)>t)s.value?m&&E.emit(`variable:drag-move`,{data:m,position:c.value}):(s.value=!0,document.body.style.cursor=`grabbing`,m&&E.emit(`variable:drag-start`,{data:m,position:c.value}));else return;let i=document.elementFromPoint(e.clientX,e.clientY);if(!i){u.value=`default`,d.value=null;return}let a=i.getAttribute(`contenteditable`)===`true`||i instanceof HTMLInputElement||i instanceof HTMLTextAreaElement,f=null;if(a)f=i;else{let e=i.closest(`[contenteditable='true']`);if(!e){u.value=`default`,d.value=null;return}f=e}d.value=f,u.value=h(f).trim()===``?`empty`:`hasContent`}function D(e){if(!o.value)return;let t={x:e.clientX,y:e.clientY};m&&typeof m==`object`&&(m.isReplace=p.value),E.emit(`variable:drag-end`,{data:m,position:t}),b(),o.value=!1,s.value=!1,u.value=`default`,d.value=null,r&&(f.value=!1),document.body.style.cursor=``,document.removeEventListener(`mousemove`,T),document.removeEventListener(`mouseup`,D),document.removeEventListener(`keydown`,C),document.removeEventListener(`keyup`,w);let i=document.elementFromPoint(e.clientX,e.clientY);if(i&&m){let e=new CustomEvent(n,{bubbles:!0,detail:m});i.dispatchEvent(e)}a&&a(m),m=null}function O(e,t){e.preventDefault(),e.stopPropagation(),o.value=!0,s.value=!1,u.value=`default`,d.value=null,r&&(f.value=!0),l.value={x:e.clientX,y:e.clientY},c.value={x:e.clientX,y:e.clientY},m=t,i&&i(t),document.addEventListener(`mousemove`,T),document.addEventListener(`mouseup`,D),document.addEventListener(`keydown`,C),document.addEventListener(`keyup`,w)}function k(){b(),o.value=!1,s.value=!1,u.value=`default`,d.value=null,r&&(f.value=!1),m=null,document.body.style.cursor=``,document.removeEventListener(`mousemove`,T),document.removeEventListener(`mouseup`,D),document.removeEventListener(`keydown`,C),document.removeEventListener(`keyup`,w)}return{isDragging:o,showDragFollower:s,dragPosition:c,dropTargetState:u,currentEditableElement:d,isCtrlPressed:p,isHighlighted:r?f:void 0,dragFollowerStyle:S,startDrag:O,reset:k}}var N={class:`py-1`},P=[`onClick`],F={class:`flex flex-col gap-0.5 min-w-0`},I={class:`text-xs text-slate-500 font-medium`},L={class:`flex items-center gap-2`},R={class:`text-xs text-slate-500 font-medium`},z=D(m({__name:`ContextMenu`,props:{items:{}},setup(f,{expose:m}){let y=g(!1),E=g(null),D=g({top:`0px`,left:`0px`}),O=w();function k(e){e.preventDefault();let t=e.clientX,n=e.clientY;y.value=!0,D.value={top:`${n}px`,left:`${t}px`},setTimeout(()=>{if(E.value){let e=E.value.getBoundingClientRect(),r=n,i=t;e.right>window.innerWidth-10&&(i=window.innerWidth-e.width-10),e.bottom>window.innerHeight-10&&(r=window.innerHeight-e.height-10),i<10&&(i=10),r<10&&(r=10),D.value={top:`${r}px`,left:`${i}px`}}},0)}function A(){y.value=!1}function j(e){e.onClick(),A()}function M(e){navigator.clipboard.writeText(e).then(()=>{O.success(`已复制到剪贴板`)}).catch(()=>{O.error(`复制失败`)})}function z(e){if(!y.value)return;let t=e.target;E.value&&!E.value.contains(t)&&A()}return d(()=>{document.addEventListener(`mousedown`,z)}),e(()=>{document.removeEventListener(`mousedown`,z)}),m({copyToClipboard:M}),(e,d)=>(v(),o(`div`,{class:`context-menu-trigger`,onContextmenu:l(k,[`prevent`])},[C(e.$slots,`default`,{},void 0,!0),(v(),c(t,{to:`body`},[r(p,{"enter-active-class":`transition duration-150 ease-out`,"enter-from-class":`opacity-0 scale-95`,"enter-to-class":`opacity-100 scale-100`,"leave-active-class":`transition duration-100 ease-in`,"leave-from-class":`opacity-100 scale-100`,"leave-to-class":`opacity-0 scale-95`},{default:T(()=>[_(s(`div`,{ref_key:`menuRef`,ref:E,class:`fixed rounded-lg border border-slate-200 bg-white shadow-xl z-10000 min-w-max`,style:x(D.value)},[s(`div`,N,[(v(!0),o(b,null,S(f.items,(e,t)=>(v(),o(`div`,{key:t,class:i([`px-3 py-2 cursor-pointer hover:bg-slate-100 transition-colors flex text-sm`,e.layout===`horizontal`?`items-center gap-2`:`flex-col gap-0.5`]),onClick:t=>j(e)},[e.layout===`horizontal`?(v(),o(b,{key:0},[e.icon?(v(),c(h(e.icon),{key:0,class:`w-4 h-4 shrink-0`})):u(``,!0),s(`div`,F,[s(`div`,I,n(e.label),1),s(`div`,{class:`text-xs font-mono truncate`,style:x({color:e.color})},n(e.value),5)])],64)):(v(),o(b,{key:1},[s(`div`,L,[e.icon?(v(),c(h(e.icon),{key:0,class:`w-4 h-4 shrink-0`})):u(``,!0),s(`div`,R,n(e.label),1)]),s(`div`,{class:`text-xs font-mono truncate`,style:x({color:e.color})},n(e.value),5)],64))],10,P))),128))])],4),[[a,y.value]])]),_:1})])),y.value?(v(),o(`div`,{key:0,class:`fixed inset-0`,onClick:A,onContextmenu:l(A,[`prevent`])},null,32)):u(``,!0)],32))}}),[[`__scopeId`,`data-v-45579e10`]]),B={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`w-4 h-4`},V=m({name:`IconCopyKey`,__name:`IconCopyKey`,setup(e){return(e,t)=>(v(),o(`svg`,B,[...t[0]||=[f(`<path d="M3 17a4.828 4.828 0 0 0 4.604 4.972"></path><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path><path d="M21 11a9 9 0 0 1-9 9 8.976 8.976 0 0 1-7.422-3.756"></path><path d="M3 21v-5h5"></path>`,5)]]))}}),H={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`w-4 h-4`},U=m({name:`IconCopyValue`,__name:`IconCopyValue`,setup(e){return(e,t)=>(v(),o(`svg`,H,[...t[0]||=[s(`path`,{d:`M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2`},null,-1),s(`rect`,{x:`8`,y:`2`,width:`8`,height:`4`,rx:`1`,ry:`1`},null,-1)]]))}}),W={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`w-4 h-4`},G=m({name:`IconCopyReference`,__name:`IconCopyReference`,setup(e){return(e,t)=>(v(),o(`svg`,W,[...t[0]||=[f(`<circle cx="12" cy="12" r="1"></circle><path d="M12 1v6m0 6v6"></path><path d="M4.22 4.22l4.24 4.24m2.12 2.12l4.24 4.24"></path><path d="M1 12h6m6 0h6"></path><path d="M4.22 19.78l4.24-4.24m2.12-2.12l4.24-4.24"></path>`,5)]]))}});export{M as a,z as i,U as n,j as o,V as r,G as t};