import{F as e,Ft as t,I as n,L as r,M as i,Mt as a,N as o,P as s,Pt as c,R as l,T as u,U as d,V as f,W as p,at as m,ct as h,j as g,k as _,l as v,mt as y,nt as b,ot as x,pt as S,rt as C,tt as w,wt as T}from"./index-DIItrjPD.js";import{n as E}from"./events-CdBEY3Zi.js";import{t as D}from"./_plugin-vue_export-helper-DEnkkObV.js";var O={},k={t:`1761820393760`,class:`icon`,viewBox:`0 0 1024 1024`,version:`1.1`,xmlns:`http://www.w3.org/2000/svg`,"p-id":`15758`,width:`200`,height:`200`};function A(t,n){return C(),l(`svg`,k,[...n[0]||=[e(`path`,{d:`M320.512 256h92.48v46.08h-92.48V256z m469.184 113.504h46.72v46.08h-46.72v-46.08z m46.72 46.08h46.08V739.52h-46.08V415.584zM790.304 739.52h46.08v139.2h-46.08v-139.2z m-46.08 232.32H373.056v-93.12h-46.08v139.2h463.296v-139.2h-46.08v93.12z m-463.328-185.28h46.08v92.16h-46.08v-92.16z m-46.08-92.224h46.08v92.192h-46.08v-92.192z m-46.112-92.192h46.08v92.16h-46.08v-92.16z m-46.08-48.416h46.08v48.416h-46.08v-48.416z m155.68-59.2v-46.08H188.928l-46.336 105.28h46.336l25.216-59.2h84.16z`,fill:`#515151`,"p-id":`15759`},null,-1),e(`path`,{d:`M280.896 476.608v172.8h46.08V302.08h-46.08v174.464z m184.704-13.6V277.312h92.992V231.2H465.6v6.912h-46.08v224.896h46.08z m139.104 0v-139.616h92.8v-46.08h-138.88v185.696h46.08z m138.88 45.984v-139.52h46.112v-46.08h-92.192v185.6h46.08z`,fill:`#515151`,"p-id":`15760`},null,-1)]])}var j=D(O,[[`render`,A]]);function M(e={}){let{dragThreshold:t=5,eventName:n=`editable-drop`,enableHighlight:r=!1,onDragStart:i,onDragEnd:a}=e,o=T(!1),c=T(!1),l=T({x:0,y:0}),u=T({x:0,y:0}),d=T(`default`),f=T(null),p=T(!1),m=T(!1),h=null;function g(e){return e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement?e.value:e.textContent?.replace(/\u00a0/g,` `).replace(/\u200B/g,``)||``}let _=[],v=`border-green-600!`,y=()=>{_.forEach(e=>{e.classList.remove(v)}),_.length=0},b=e=>{let t=e.closest(`.variable-text-input`);y(),t&&!_.includes(t)&&(_.push(t),t.classList.add(v))},x=s(()=>{let e=f.value;if(e&&d.value===`empty`){b(e);let t=e.getBoundingClientRect();return{left:t.left-8+`px`,top:t.top+t.height/2+`px`,transform:`translate(12px, -50%)`}}return e&&d.value===`hasContent`?(b(e),{left:l.value.x+`px`,top:l.value.y+`px`}):(y(),{left:l.value.x+`px`,top:l.value.y+`px`,transform:`translate(-50%, -100%)`})});function S(e){o.value&&(e.ctrlKey||e.metaKey)&&(m.value=!0)}function C(e){o.value&&!e.ctrlKey&&!e.metaKey&&(m.value=!1)}function w(e){if(!o.value)return;m.value=e.ctrlKey||e.metaKey,l.value={x:e.clientX,y:e.clientY};let n=e.clientX-u.value.x,r=e.clientY-u.value.y;if(Math.sqrt(n*n+r*r)>t)c.value?h&&E.emit(`variable:drag-move`,{data:h,position:l.value}):(c.value=!0,document.body.style.cursor=`grabbing`,h&&E.emit(`variable:drag-start`,{data:h,position:l.value}));else return;let i=document.elementFromPoint(e.clientX,e.clientY);if(!i){d.value=`default`,f.value=null;return}let a=i.getAttribute(`contenteditable`)===`true`||i instanceof HTMLInputElement||i instanceof HTMLTextAreaElement,s=null;if(a)s=i;else{let e=i.closest(`[contenteditable='true']`);if(!e){d.value=`default`,f.value=null;return}s=e}f.value=s,d.value=g(s).trim()===``?`empty`:`hasContent`}function D(e){if(!o.value)return;let t={x:e.clientX,y:e.clientY};h&&typeof h==`object`&&(h.isReplace=m.value),E.emit(`variable:drag-end`,{data:h,position:t}),y(),o.value=!1,c.value=!1,d.value=`default`,f.value=null,r&&(p.value=!1),document.body.style.cursor=``,document.removeEventListener(`mousemove`,w),document.removeEventListener(`mouseup`,D),document.removeEventListener(`keydown`,S),document.removeEventListener(`keyup`,C);let i=document.elementFromPoint(e.clientX,e.clientY);if(i&&h){let e=new CustomEvent(n,{bubbles:!0,detail:h});i.dispatchEvent(e)}a&&a(h),h=null}function O(e,t){e.preventDefault(),e.stopPropagation(),o.value=!0,c.value=!1,d.value=`default`,f.value=null,r&&(p.value=!0),u.value={x:e.clientX,y:e.clientY},l.value={x:e.clientX,y:e.clientY},h=t,i&&i(t),document.addEventListener(`mousemove`,w),document.addEventListener(`mouseup`,D),document.addEventListener(`keydown`,S),document.addEventListener(`keyup`,C)}function k(){y(),o.value=!1,c.value=!1,d.value=`default`,f.value=null,r&&(p.value=!1),h=null,document.body.style.cursor=``,document.removeEventListener(`mousemove`,w),document.removeEventListener(`mouseup`,D),document.removeEventListener(`keydown`,S),document.removeEventListener(`keyup`,C)}return{isDragging:o,showDragFollower:c,dragPosition:l,dropTargetState:d,currentEditableElement:f,isCtrlPressed:m,isHighlighted:r?p:void 0,dragFollowerStyle:x,startDrag:O,reset:k}}var N={class:`py-1`},P=[`onClick`],F={class:`flex flex-col gap-0.5 min-w-0`},I={class:`text-xs text-slate-500 font-medium`},L={class:`flex items-center gap-2`},R={class:`text-xs text-slate-500 font-medium`},z=D(p({__name:`ContextMenu`,props:{items:{}},setup(s,{expose:f}){let p=T(!1),E=T(null),D=T({top:`0px`,left:`0px`}),O=v();function k(e){e.preventDefault();let t=e.clientX,n=e.clientY;p.value=!0,D.value={top:`${n}px`,left:`${t}px`},setTimeout(()=>{if(E.value){let e=E.value.getBoundingClientRect(),r=n,i=t;e.right>window.innerWidth-10&&(i=window.innerWidth-e.width-10),e.bottom>window.innerHeight-10&&(r=window.innerHeight-e.height-10),i<10&&(i=10),r<10&&(r=10),D.value={top:`${r}px`,left:`${i}px`}}},0)}function A(){p.value=!1}function j(e){e.onClick(),A()}function M(e){navigator.clipboard.writeText(e).then(()=>{O.success(`已复制到剪贴板`)}).catch(()=>{O.error(`复制失败`)})}function z(e){if(!p.value)return;let t=e.target;E.value&&!E.value.contains(t)&&A()}return w(()=>{document.addEventListener(`mousedown`,z)}),b(()=>{document.removeEventListener(`mousedown`,z)}),f({copyToClipboard:M}),(f,v)=>(C(),l(`div`,{class:`context-menu-trigger`,onContextmenu:g(k,[`prevent`])},[x(f.$slots,`default`,{},void 0,!0),(C(),n(o,{to:`body`},[d(u,{"enter-active-class":`transition duration-150 ease-out`,"enter-from-class":`opacity-0 scale-95`,"enter-to-class":`opacity-100 scale-100`,"leave-active-class":`transition duration-100 ease-in`,"leave-from-class":`opacity-100 scale-100`,"leave-to-class":`opacity-0 scale-95`},{default:S(()=>[y(e(`div`,{ref_key:`menuRef`,ref:E,class:`fixed rounded-lg border border-slate-200 bg-white shadow-xl z-10000 min-w-max`,style:c(D.value)},[e(`div`,N,[(C(!0),l(i,null,m(s.items,(o,s)=>(C(),l(`div`,{key:s,class:a([`px-3 py-2 cursor-pointer hover:bg-slate-100 transition-colors flex text-sm`,o.layout===`horizontal`?`items-center gap-2`:`flex-col gap-0.5`]),onClick:e=>j(o)},[o.layout===`horizontal`?(C(),l(i,{key:0},[o.icon?(C(),n(h(o.icon),{key:0,class:`w-4 h-4 shrink-0`})):r(``,!0),e(`div`,F,[e(`div`,I,t(o.label),1),e(`div`,{class:`text-xs font-mono truncate`,style:c({color:o.color})},t(o.value),5)])],64)):(C(),l(i,{key:1},[e(`div`,L,[o.icon?(C(),n(h(o.icon),{key:0,class:`w-4 h-4 shrink-0`})):r(``,!0),e(`div`,R,t(o.label),1)]),e(`div`,{class:`text-xs font-mono truncate`,style:c({color:o.color})},t(o.value),5)],64))],10,P))),128))])],4),[[_,p.value]])]),_:1})])),p.value?(C(),l(`div`,{key:0,class:`fixed inset-0`,onClick:A,onContextmenu:g(A,[`prevent`])},null,32)):r(``,!0)],32))}}),[[`__scopeId`,`data-v-45579e10`]]),B={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`w-4 h-4`},V=p({name:`IconCopyKey`,__name:`IconCopyKey`,setup(e){return(e,t)=>(C(),l(`svg`,B,[...t[0]||=[f(`<path d="M3 17a4.828 4.828 0 0 0 4.604 4.972"></path><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path><path d="M21 11a9 9 0 0 1-9 9 8.976 8.976 0 0 1-7.422-3.756"></path><path d="M3 21v-5h5"></path>`,5)]]))}}),H={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`w-4 h-4`},U=p({name:`IconCopyValue`,__name:`IconCopyValue`,setup(t){return(t,n)=>(C(),l(`svg`,H,[...n[0]||=[e(`path`,{d:`M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2`},null,-1),e(`rect`,{x:`8`,y:`2`,width:`8`,height:`4`,rx:`1`,ry:`1`},null,-1)]]))}}),W={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`w-4 h-4`},G=p({name:`IconCopyReference`,__name:`IconCopyReference`,setup(e){return(e,t)=>(C(),l(`svg`,W,[...t[0]||=[f(`<circle cx="12" cy="12" r="1"></circle><path d="M12 1v6m0 6v6"></path><path d="M4.22 4.22l4.24 4.24m2.12 2.12l4.24 4.24"></path><path d="M1 12h6m6 0h6"></path><path d="M4.22 19.78l4.24-4.24m2.12-2.12l4.24-4.24"></path>`,5)]]))}});export{M as a,z as i,U as n,j as o,V as r,G as t};