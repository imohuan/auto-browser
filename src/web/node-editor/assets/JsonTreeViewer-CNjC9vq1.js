import{F as e,Ft as t,H as n,I as r,L as i,M as a,Mt as o,N as s,P as c,Pt as l,R as u,U as d,W as f,at as p,jt as m,l as h,pt as g,rt as _,st as v,wt as y}from"./index-DIItrjPD.js";import{t as b}from"./_plugin-vue_export-helper-DEnkkObV.js";import{a as x,i as S,n as C,o as w,r as T,t as E}from"./IconCopyReference-rLVYJUoO.js";var D={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`w-4 h-4`},O=f({name:`IconCopyPath`,__name:`IconCopyPath`,setup(t){return(t,n)=>(_(),u(`svg`,D,[...n[0]||=[e(`path`,{d:`M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71`},null,-1),e(`path`,{d:`M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71`},null,-1)]]))}}),k={class:`json-tree-node-wrapper`},ee={class:`flex items-center gap-1.5`},te={key:0,class:`text-purple-600 text-xs`},ne={key:1,class:`text-emerald-600 text-xs`},re={key:2,class:`text-blue-600 text-xs`},ie={key:3,class:`text-[10px] opacity-70`},ae={key:4,class:`text-[10px] opacity-70`},oe={key:5,class:`text-[10px] opacity-70`},se={class:`json-tree-node`},ce={class:`json-indent`},le={class:`json-content`},ue={class:`json-key`},de={class:`json-item-count text-gray-400 ml-2`},A={key:0,class:`json-comma`},j={key:0,class:`json-comma`},M={class:`json-tree-node`},N={class:`json-indent`},P={class:`json-content`},F={key:0,class:`json-comma`},I=f({name:`JsonTreeNode`,__name:`JsonTreeNode`,props:{data:{},keyName:{default:null},depth:{default:0},path:{default:``},isLast:{type:Boolean,default:!0},parentIsLast:{type:Boolean,default:!0},enableDrag:{type:Boolean,default:!0},expandAll:{type:Boolean,default:!1}},setup(f){let b=f,D=y(b.expandAll||b.depth<2),I=c(()=>b.data!==null&&typeof b.data==`object`),L=c(()=>Array.isArray(b.data)),R=c(()=>Array.isArray(b.data)?`[`:typeof b.data==`object`&&b.data!==null?`{`:``),z=c(()=>Array.isArray(b.data)?`]`:typeof b.data==`object`&&b.data!==null?`}`:``),B=c(()=>I.value?(Array.isArray(b.data),b.data):[]),V=c(()=>{if(Array.isArray(b.data)){let e=b.data.length;return e===1?`1 item`:`${e} items`}if(typeof b.data==`object`&&b.data!==null){let e=Object.keys(b.data).length;return e===1?`1 key`:`${e} keys`}return``}),H=(e,t)=>L.value?t:String(e),fe=(e,t)=>{if(L.value)return b.path?`${b.path}[${t}]`:`[${t}]`;let n=String(e);return b.path?`${b.path}.${n}`:n},pe=e=>{let t=B.value;return Array.isArray(t)?e===t.length-1:e===Object.keys(t).length-1},U=e=>b.isLast?b.isLast&&b.parentIsLast===!1?e<b.depth:b.isLast&&I.value&&D.value?b.depth===0?!1:e<b.depth:b.isLast&&b.depth>0?e<b.depth:!1:!0,W=()=>{D.value=!D.value},G=c(()=>b.data===null?`null`:Array.isArray(b.data)?`array`:typeof b.data),K=c(()=>{switch(G.value){case`string`:return`"${b.data}"`;case`null`:return`null`;case`boolean`:case`number`:return String(b.data);default:return String(b.data)}}),me=c(()=>({string:`json-value-string`,number:`json-value-number`,boolean:`json-value-boolean`,null:`json-value-null`})[G.value]||``),he=c(()=>{let e=[];if(b.keyName===null)return e;if(e.push({label:`复制 Key`,value:b.keyName,color:`#a855f7`,icon:T,layout:`horizontal`,onClick:()=>{$(b.keyName)}}),b.path){e.push({label:`复制路径`,value:b.path,color:`#d97706`,icon:O,layout:`horizontal`,onClick:()=>{$(b.path)}});let t=`{{ ${b.path} }}`;e.push({label:`复制引用`,value:t,color:`#0284c7`,icon:E,layout:`vertical`,onClick:()=>{$(t)}})}return e}),ge=c(()=>{let e=[];if(e.push({label:`复制 Value`,value:K.value,color:`#059669`,icon:C,layout:`horizontal`,onClick:()=>{$(String(b.data))}}),b.keyName&&e.push({label:`复制 Key`,value:b.keyName,color:`#a855f7`,icon:T,layout:`horizontal`,onClick:()=>{$(b.keyName)}}),b.path){e.push({label:`复制路径`,value:b.path,color:`#d97706`,icon:O,layout:`horizontal`,onClick:()=>{$(b.path)}});let t=`{{ ${b.path} }}`;e.push({label:`复制引用`,value:t,color:`#0284c7`,icon:E,layout:`vertical`,onClick:()=>{$(t)}})}return e}),{isDragging:_e,showDragFollower:ve,dragPosition:q,dropTargetState:J,isHighlighted:Y,isCtrlPressed:X,dragFollowerStyle:Z,startDrag:ye}=x({eventName:`variable-drop`,enableHighlight:!0}),be=e=>{if(!b.enableDrag||b.keyName===null)return;e.stopPropagation();let t=b.path?`{{ ${b.path} }}`:``,n={key:b.keyName,path:b.path,value:b.data,reference:t,isReplace:e.ctrlKey||e.metaKey};ye(e,n)},Q=h();function $(e){navigator.clipboard.writeText(e).then(()=>{Q.success(`已复制到剪贴板`)}).catch(()=>{Q.error(`复制失败`)})}return(c,h)=>{let y=v(`JsonTreeNode`,!0);return _(),u(`div`,k,[(_(),r(s,{to:`body`},[m(J)===`default`?i(``,!0):(_(),u(`div`,{key:0,class:`fixed pointer-events-none z-10001 w-8 h-8 flex items-center justify-center`,style:l({left:m(q).x+`px`,top:m(q).y+`px`,transform:`translate(-50%, -50%)`})},[d(w,{class:`w-5 h-5 text-slate-800`})],4)),m(ve)?(_(),u(`div`,{key:1,class:o([`fixed pointer-events-none z-10000 px-3 py-1 text-xs font-medium rounded-lg shadow-lg backdrop-blur`,[m(X)?`bg-purple-100/95 border-2 border-purple-400 text-purple-700`:m(J)===`empty`?`bg-emerald-100/95 border-2 border-emerald-400 text-emerald-700`:m(J)===`hasContent`?`bg-blue-100/95 border-2 border-blue-400 text-blue-700`:`bg-red-100/95 border-2 border-red-400 text-red-700`]]),style:l(m(Z))},[e(`div`,ee,[m(X)?(_(),u(`span`,te,`⟳`)):m(J)===`empty`?(_(),u(`span`,ne,`⇱`)):m(J)===`hasContent`?(_(),u(`span`,re,`↓`)):i(``,!0),n(` `+t(f.keyName)+` `,1),m(X)?(_(),u(`span`,ie,`替换`)):m(J)===`empty`?(_(),u(`span`,ae,`吸附左侧`)):m(J)===`hasContent`?(_(),u(`span`,oe,`插入位置`)):i(``,!0)])],6)):i(``,!0)])),e(`div`,se,[e(`div`,ce,[(_(!0),u(a,null,p(f.depth,e=>(_(),u(`div`,{key:e,class:o([`json-indent-unit`,{"has-line":U(e-1)}])},null,2))),128))]),e(`span`,le,[f.keyName===null?i(``,!0):(_(),r(S,{key:0,items:he.value},{default:g(()=>[e(`span`,ue,[e(`span`,{class:o([`json-key-content`,{"cursor-grab active:cursor-grabbing":b.enableDrag,"cursor-default":!b.enableDrag,"is-dragging":m(_e),"is-highlight":m(Y)}]),onMousedown:be},` "`+t(f.keyName)+`" `,35),h[0]||=e(`span`,{class:`json-colon`},`: `,-1)])]),_:1},8,[`items`])),I.value?(_(),u(a,{key:1},[e(`span`,{class:`json-brackets cursor-pointer`,onClick:W},t(R.value),1),D.value?i(``,!0):(_(),u(a,{key:0},[e(`span`,{class:`json-collapsed-content cursor-pointer text-gray-400 hover:text-gray-600 transition-colors`,onClick:W},` ... `),e(`span`,{class:`json-brackets cursor-pointer`,onClick:W},t(z.value),1),e(`span`,de,` // `+t(V.value),1),f.isLast?i(``,!0):(_(),u(`span`,A,`,`))],64))],64)):(_(),u(a,{key:2},[d(S,{items:ge.value},{default:g(()=>[e(`span`,{class:o([`json-value`,[me.value,{"is-highlight":m(Y)}]])},t(K.value),3)]),_:1},8,[`items`]),f.isLast?i(``,!0):(_(),u(`span`,j,`,`))],64))])]),D.value&&I.value?(_(),u(a,{key:0},[(_(!0),u(a,null,p(B.value,(e,t,n)=>(_(),r(y,{key:H(t,n),data:e,"key-name":L.value?null:String(t),depth:f.depth+1,path:fe(t,n),"is-last":pe(n),"parent-is-last":f.isLast,"enable-drag":b.enableDrag,"expand-all":b.expandAll},null,8,[`data`,`key-name`,`depth`,`path`,`is-last`,`parent-is-last`,`enable-drag`,`expand-all`]))),128)),e(`div`,M,[e(`div`,N,[(_(!0),u(a,null,p(f.depth,e=>(_(),u(`div`,{key:e,class:o([`json-indent-unit`,{"has-line":U(e-1)}])},null,2))),128))]),e(`span`,P,[e(`span`,{class:`json-brackets cursor-pointer`,onClick:W},t(z.value),1),f.isLast?i(``,!0):(_(),u(`span`,F,`,`))])])],64)):i(``,!0)])}}}),L=b(I,[[`__scopeId`,`data-v-4fb9ad2f`]]),R={class:`json-tree-viewer`},z={class:`json-tree-list`},B=f({__name:`JsonTreeViewer`,props:{data:{},enableDrag:{type:Boolean,default:!0},expandAll:{type:Boolean,default:!1}},setup(t){let n=t;return(t,r)=>(_(),u(`div`,R,[e(`div`,z,[d(L,{data:n.data,depth:0,path:``,"is-last":!0,"enable-drag":n.enableDrag,"expand-all":n.expandAll},null,8,[`data`,`enable-drag`,`expand-all`])])]))}}),V=b(B,[[`__scopeId`,`data-v-d8f746e1`]]);export{V as t};