import{A as e,B as t,Et as n,F as r,M as i,N as a,Ot as o,P as s,Tt as c,V as l,bt as u,et as d,it as f,j as p,k as m,kt as h,nt as g,z as _}from"./index-B7qcHONN.js";import{t as v}from"./_plugin-vue_export-helper-DEnkkObV.js";import{n as y,t as b}from"./useEditableDrag-CB53J2oW.js";var x={class:`json-tree-node-wrapper`},S={class:`flex items-center gap-1.5`},C={key:0,class:`text-emerald-600 text-xs`},w={key:1,class:`text-blue-600 text-xs`},T={key:2,class:`text-[10px] opacity-70`},E={key:3,class:`text-[10px] opacity-70`},D={class:`json-tree-node`},ee={class:`json-indent`},te={class:`json-content`},ne={key:0,class:`json-key`},O={class:`json-item-count text-gray-400 ml-2`},k={key:1,class:`json-comma`},A={key:0,class:`json-comma`},j={class:`json-tree-node`},M={class:`json-indent`},N={class:`json-content`},P={key:0,class:`json-comma`},F=l({name:`JsonTreeNode`,__name:`JsonTreeNode`,props:{data:{},keyName:{default:null},depth:{default:0},path:{default:``},isLast:{type:Boolean,default:!0},parentIsLast:{type:Boolean,default:!0},enableDrag:{type:Boolean,default:!0},expandAll:{type:Boolean,default:!1}},setup(l){let v=l,F=u(v.expandAll||v.depth<2),I=p(()=>v.data!==null&&typeof v.data==`object`),L=p(()=>Array.isArray(v.data)),R=p(()=>Array.isArray(v.data)?`[`:typeof v.data==`object`&&v.data!==null?`{`:``),z=p(()=>Array.isArray(v.data)?`]`:typeof v.data==`object`&&v.data!==null?`}`:``),B=p(()=>I.value?(Array.isArray(v.data),v.data):[]),V=p(()=>{if(Array.isArray(v.data)){let e=v.data.length;return e===1?`1 item`:`${e} items`}if(typeof v.data==`object`&&v.data!==null){let e=Object.keys(v.data).length;return e===1?`1 key`:`${e} keys`}return``}),H=(e,t)=>L.value?t:String(e),U=(e,t)=>{if(L.value)return v.path?`${v.path}[${t}]`:`[${t}]`;let n=String(e);return v.path?`${v.path}.${n}`:n},W=e=>{let t=B.value;return Array.isArray(t)?e===t.length-1:e===Object.keys(t).length-1},G=e=>v.isLast?v.isLast&&v.parentIsLast===!1?e<v.depth:v.isLast&&I.value&&F.value?v.depth===0?!1:e<v.depth:v.isLast&&v.depth>0?e<v.depth:!1:!0,K=()=>{F.value=!F.value},q=p(()=>v.data===null?`null`:Array.isArray(v.data)?`array`:typeof v.data),J=p(()=>{switch(q.value){case`string`:return`"${v.data}"`;case`null`:return`null`;case`boolean`:case`number`:return String(v.data);default:return String(v.data)}}),Y=p(()=>({string:`json-value-string`,number:`json-value-number`,boolean:`json-value-boolean`,null:`json-value-null`})[q.value]||``),{isDragging:X,showDragFollower:re,dragPosition:Z,dropTargetState:Q,isHighlighted:$,dragFollowerStyle:ie,startDrag:ae}=b({eventName:`variable-drop`,enableHighlight:!0}),oe=e=>{if(!v.enableDrag||v.keyName===null)return;e.stopPropagation();let t=v.path?`{{ ${v.path} }}`:``,n={key:v.keyName,path:v.path,value:v.data,reference:t};ae(e,n)};return(u,p)=>{let b=f(`JsonTreeNode`,!0);return d(),r(`div`,x,[(d(),a(e,{to:`body`},[c(Q)===`default`?s(``,!0):(d(),r(`div`,{key:0,class:`fixed pointer-events-none z-10001 w-8 h-8 flex items-center justify-center`,style:o({left:c(Z).x+`px`,top:c(Z).y+`px`,transform:`translate(-50%, -50%)`})},[t(y,{class:`w-5 h-5 text-slate-800`})],4)),c(re)?(d(),r(`div`,{key:1,class:n([`fixed pointer-events-none z-10000 px-3 py-1 text-xs font-medium rounded-lg shadow-lg backdrop-blur`,[c(Q)===`empty`?`bg-emerald-100/95 border-2 border-emerald-400 text-emerald-700`:c(Q)===`hasContent`?`bg-blue-100/95 border-2 border-blue-400 text-blue-700`:`bg-red-100/95 border-2 border-red-400 text-red-700`]]),style:o(c(ie))},[i(`div`,S,[c(Q)===`empty`?(d(),r(`span`,C,`⇱`)):c(Q)===`hasContent`?(d(),r(`span`,w,`↓`)):s(``,!0),_(` `+h(l.keyName)+` `,1),c(Q)===`empty`?(d(),r(`span`,T,`吸附左侧`)):c(Q)===`hasContent`?(d(),r(`span`,E,`插入位置`)):s(``,!0)])],6)):s(``,!0)])),i(`div`,D,[i(`div`,ee,[(d(!0),r(m,null,g(l.depth,e=>(d(),r(`div`,{key:e,class:n([`json-indent-unit`,{"has-line":G(e-1)}])},null,2))),128))]),i(`span`,te,[l.keyName===null?s(``,!0):(d(),r(`span`,ne,[i(`span`,{class:n([`json-key-content`,{"cursor-grab active:cursor-grabbing":v.enableDrag,"cursor-default":!v.enableDrag,"is-dragging":c(X),"is-highlight":c($)}]),onMousedown:oe},` "`+h(l.keyName)+`" `,35),p[0]||=i(`span`,{class:`json-colon`},`: `,-1)])),I.value?(d(),r(m,{key:1},[i(`span`,{class:`json-brackets cursor-pointer`,onClick:K},h(R.value),1),F.value?s(``,!0):(d(),r(m,{key:0},[i(`span`,{class:`json-collapsed-content cursor-pointer text-gray-400 hover:text-gray-600 transition-colors`,onClick:K},` ... `),i(`span`,{class:`json-brackets cursor-pointer`,onClick:K},h(z.value),1),i(`span`,O,` // `+h(V.value),1)],64)),l.isLast?s(``,!0):(d(),r(`span`,k,`,`))],64)):(d(),r(m,{key:2},[i(`span`,{class:n([`json-value`,[Y.value,{"is-highlight":c($)}]])},h(J.value),3),l.isLast?s(``,!0):(d(),r(`span`,A,`,`))],64))])]),F.value&&I.value?(d(),r(m,{key:0},[(d(!0),r(m,null,g(B.value,(e,t,n)=>(d(),a(b,{key:H(t,n),data:e,"key-name":L.value?null:String(t),depth:l.depth+1,path:U(t,n),"is-last":W(n),"parent-is-last":l.isLast,"enable-drag":v.enableDrag,"expand-all":v.expandAll},null,8,[`data`,`key-name`,`depth`,`path`,`is-last`,`parent-is-last`,`enable-drag`,`expand-all`]))),128)),i(`div`,j,[i(`div`,M,[(d(!0),r(m,null,g(l.depth,e=>(d(),r(`div`,{key:e,class:n([`json-indent-unit`,{"has-line":G(e-1)}])},null,2))),128))]),i(`span`,N,[i(`span`,{class:`json-brackets cursor-pointer`,onClick:K},h(z.value),1),l.isLast?s(``,!0):(d(),r(`span`,P,`,`))])])],64)):s(``,!0)])}}}),I=v(F,[[`__scopeId`,`data-v-a0cbf772`]]),L={class:`json-tree-viewer`},R={class:`json-tree-list`},z=l({__name:`JsonTreeViewer`,props:{data:{},enableDrag:{type:Boolean,default:!0},expandAll:{type:Boolean,default:!1}},setup(e){let n=e;return(e,a)=>(d(),r(`div`,L,[i(`div`,R,[t(I,{data:n.data,depth:0,path:``,"is-last":!0,"enable-drag":n.enableDrag,"expand-all":n.expandAll},null,8,[`data`,`enable-drag`,`expand-all`])])]))}}),B=v(z,[[`__scopeId`,`data-v-d8f746e1`]]);export{B as t};