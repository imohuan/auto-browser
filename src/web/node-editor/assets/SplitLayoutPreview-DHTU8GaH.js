import{n as e,t}from"./ui-BKGKT1-n.js";import{B as n,D as r,E as i,F as a,J as o,M as s,N as c,Ot as l,P as u,Tt as d,V as f,bt as p,ct as ee,dt as m,et as h,f as g,h as _,j as v,k as y,kt as b,ut as x,z as S}from"./index-B7qcHONN.js";import"./editor.api-C3--bZyW.js";import"./monaco.contribution-zlJWm1f5.js";import"./events-DYHBDbVc.js";import{t as C}from"./_plugin-vue_export-helper-DEnkkObV.js";import"./IconChevronRight-CSVGKrG2.js";import{t as w}from"./IconSearch-D6ePBVBL.js";import{t as T}from"./CodeEditor-B6Xge8TJ.js";import{n as E,t as te}from"./jsonToVariableTree-QFw_qP8f.js";import"./useEditableDrag-CB53J2oW.js";import{t as ne}from"./JsonTreeViewer-B0xyBWRC.js";var re={class:`h-full flex flex-col`},ie={class:`shrink-0 border-b border-slate-200 px-4 py-3`},D={class:`flex items-center justify-between gap-3`},O={class:`flex items-center gap-2`},k={class:`h-7 flex items-center relative`},A={class:`flex-1 overflow-auto variable-scroll px-4 py-4`},j={class:`shrink-0 flex items-center gap-2 pb-2`},M={class:`w-32`},N={class:`text-xs text-slate-500 font-mono`},P={class:`h-full flex flex-col`},F={class:`shrink-0 flex items-center justify-between border-b border-slate-200 px-4 py-3`},I={key:0,class:`flex items-center gap-2`},L={class:`flex-1 overflow-auto variable-scroll`},R={key:1,class:`px-4 py-6`},z=C(f({__name:`SplitLayoutPreview`,setup(f){let C=p(320),z=p(320),B=p(!1),V=p(``),H=p(null),U=p(`schema`),W=p(`output`),G=p(!1),K=p(``),q=p(``),J=p(null),Y=[{value:`schema`,label:`Schema`},{value:`json`,label:`JSON`}],ae=[{value:`output`,label:`输出`},{value:`logs`,label:`日志`}],oe=[{label:`Code`,value:`code`},{label:`JSON`,value:`json`},{label:`Text`,value:`text`}],se=v(()=>{if(Array.isArray(X)){let e=X.length;return e===1?`1 item`:`${e} items`}if(typeof X==`object`&&X){let e=Object.keys(X).length;return e===1?`1 item`:`${e} items`}return`0 items`}),X={user:{id:1,profile:{name:`李四`,avatar:`https://example.com/avatar.jpg`,settings:{theme:`dark`,language:`zh-CN`}}},metadata:{createdAt:`2024-01-01`,updatedAt:`2024-01-02`},users:[{id:1,name:`用户1`,roles:[`admin`,`editor`],preferences:{theme:`dark`,notifications:!0}},{id:2,name:`用户2`,roles:[`viewer`],preferences:{theme:`light`,notifications:!1}}],pagination:{page:1,pageSize:10,total:100}},Z=v(()=>{try{return te(X)}catch(e){return console.error(`转换 VariableTreeNode 失败:`,e),null}}),Q=()=>{try{K.value=JSON.stringify(X,null,2)}catch(e){console.error(`初始化编辑器内容失败:`,e),K.value=``}};ee(()=>G.value,e=>{e&&(K.value||Q(),q.value=K.value)}),Q();let ce=()=>{G.value=!0},le=()=>{try{JSON.parse(K.value),q.value=K.value,G.value=!1,console.log(`保存成功:`,K.value)}catch(e){console.error(`保存失败：JSON 格式错误`,e),alert(`保存失败：JSON 格式错误`)}},$=()=>{K.value=q.value,G.value=!1},ue=()=>{console.log(`Back clicked`)},de=e=>{C.value=e.leftWidth,z.value=e.rightWidth},fe=()=>{V.value||(B.value=!1)},pe=async()=>{B.value=!0,await o(),H.value?.focus()};return(o,f)=>(h(),c(d(e),{"center-title":`AI Agent`,"show-back-button":!0,"back-text":`Back to canvas`,"center-width":400,"min-left-width":.2,"min-right-width":.2,onBack:ue,onResize:de},{left:x(()=>[s(`div`,re,[s(`div`,ie,[s(`div`,D,[f[6]||=s(`h3`,{class:`text-sm font-semibold text-slate-900 uppercase tracking-wide`},` 输入 `,-1),s(`div`,O,[s(`div`,k,[s(`div`,{class:`overflow-hidden transition-all duration-200 ease-out`,style:l({width:B.value?`8rem`:`1.75rem`,opacity:B.value?1:0})},[m(n(d(_),{value:V.value,"onUpdate:value":f[0]||=e=>V.value=e,size:`small`,placeholder:`搜索...`,class:`w-32 n-input-gray`,onBlur:fe,onKeyup:f[1]||=r(e=>B.value=!1,[`escape`]),ref_key:`searchInputRef`,ref:H},{prefix:x(()=>[n(w,{class:`w-4 h-4 text-slate-400`})]),_:1},8,[`value`]),[[i,B.value]])],4),m(s(`button`,{onClick:pe,class:`absolute left-0 h-7 w-7 flex items-center justify-center text-slate-600 cursor-pointer transition-opacity duration-200`},[n(w,{class:`w-4 h-4`})],512),[[i,!B.value]])]),n(d(t),{modelValue:U.value,"onUpdate:modelValue":f[2]||=e=>U.value=e,options:Y},null,8,[`modelValue`])])])]),s(`div`,A,[U.value===`json`?(h(),a(y,{key:0},[s(`div`,j,[s(`div`,M,[n(d(g),{value:J.value,"onUpdate:value":f[3]||=e=>J.value=e,options:oe,size:`small`,placeholder:`Code`},null,8,[`value`])]),s(`span`,N,b(se.value),1)]),n(ne,{data:X})],64)):U.value===`schema`&&Z.value?(h(),c(E,{key:1,node:Z.value,level:0},null,8,[`node`])):u(``,!0)]),f[7]||=s(`div`,{class:`hidden shrink-0 border-t border-slate-200 px-4 py-2 text-xs text-slate-500`},[s(`div`,null,`Logs`)],-1)])]),center:x(()=>[...f[8]||=[s(`div`,{class:`h-full flex flex-col`},[s(`div`,{class:`shrink-0 flex items-center gap-4 border-b border-slate-200 px-6`},[s(`button`,{class:`px-3 py-2 text-sm font-medium text-blue-600 border-b-2 border-blue-600`},` Parameters `),s(`button`,{class:`px-3 py-2 text-sm font-medium text-slate-600 hover:text-slate-900`},` Settings `),s(`button`,{class:`px-3 py-2 text-sm font-medium text-slate-600 hover:text-slate-900`},` Docs `),s(`div`,{class:`flex-1`})]),s(`div`,{class:`flex-1 overflow-auto variable-scroll px-6 py-6 space-y-6`},[s(`div`,{class:`bg-blue-50 border border-blue-200 rounded-lg p-4`},[s(`p`,{class:`text-sm text-blue-800`},[s(`strong`,null,`Tip:`),S(` Information about agents. Check out the{" "} `),s(`a`,{href:`#`,class:`underline`},`tutorial`),S(` and{" "} `),s(`a`,{href:`#`,class:`underline`},`example`),S(`. `)])]),s(`div`,null,[s(`label`,{class:`block text-sm font-medium text-slate-700 mb-2`},` Source for Prompt (User Message) `),s(`input`,{type:`text`,class:`w-full px-3 py-2 text-sm border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500`,placeholder:`[empty]`})]),s(`div`,{class:`space-y-4`},[s(`div`,{class:`flex items-center justify-between`},[s(`label`,{class:`text-sm font-medium text-slate-700`},` Require Specific Output Format `),s(`label`,{class:`relative inline-flex items-center cursor-pointer`},[s(`input`,{type:`checkbox`,class:`sr-only peer`}),s(`div`,{class:`w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600`})])]),s(`div`,{class:`flex items-center justify-between`},[s(`label`,{class:`text-sm font-medium text-slate-700`},` Enable Fallback Model `),s(`label`,{class:`relative inline-flex items-center cursor-pointer`},[s(`input`,{type:`checkbox`,class:`sr-only peer`}),s(`div`,{class:`w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600`})])])]),s(`div`,null,[s(`div`,{class:`flex items-center justify-between mb-2`},[s(`h4`,{class:`text-sm font-medium text-slate-700`},`Options`),s(`button`,{class:`px-3 py-1 text-xs font-medium text-blue-600 hover:text-blue-700`},` Add Option `)]),s(`p`,{class:`text-sm text-slate-500`},`No properties`)])]),s(`div`,{class:`shrink-0 border-t border-slate-200 px-6 py-4 flex items-center gap-4`},[s(`button`,{class:`flex items-center gap-2 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-100 rounded-md transition-colors`},[s(`span`,null,`Chat Model *`)]),s(`button`,{class:`flex items-center gap-2 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-100 rounded-md transition-colors`},[s(`span`,null,`Memory`)]),s(`button`,{class:`flex items-center gap-2 px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-100 rounded-md transition-colors`},[s(`svg`,{class:`h-4 w-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[s(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M12 4v16m8-8H4`})]),s(`span`,null,`Tool`)])])],-1)]]),right:x(()=>[s(`div`,P,[s(`div`,F,[n(d(t),{modelValue:W.value,"onUpdate:modelValue":f[4]||=e=>W.value=e,options:ae},null,8,[`modelValue`]),G.value?(h(),a(`div`,I,[s(`button`,{class:`px-3 py-1.5 text-xs font-medium text-slate-700 bg-slate-200 hover:bg-slate-300 rounded transition-colors`,onClick:$},` 取消 `),s(`button`,{class:`px-3 py-1.5 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 rounded transition-colors`,onClick:le},` 保存 `)])):W.value===`output`?(h(),a(`button`,{key:1,class:`p-1 text-slate-400 hover:text-slate-600 rounded transition-colors`,onClick:ce},[...f[9]||=[s(`svg`,{class:`h-4 w-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[s(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z`})],-1)]])):u(``,!0)]),s(`div`,L,[G.value?(h(),c(T,{key:0,modelValue:K.value,"onUpdate:modelValue":f[5]||=e=>K.value=e,language:`json`,class:`h-full`,options:{minimap:{enabled:!1},fontSize:13}},null,8,[`modelValue`])):(h(),a(`div`,R,[...f[10]||=[s(`p`,{class:`text-sm text-slate-500`},` Execute this node to view data or set mock data `,-1)]]))]),f[11]||=s(`div`,{class:`hidden shrink-0 border-t border-slate-200 px-4 py-3 space-y-2`},[s(`button`,{class:`w-full text-left text-xs text-slate-500 hover:text-slate-700 transition-colors`},` I wish this node would... `),s(`button`,{class:`w-full text-left text-xs text-slate-500 hover:text-slate-700 transition-colors`},` Clear execution `)],-1)])]),_:1}))}}),[[`__scopeId`,`data-v-c27d4826`]]);export{z as default};