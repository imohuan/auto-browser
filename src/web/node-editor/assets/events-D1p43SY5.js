import{$ as e}from"./index-BxA7zcD7.js";function t(e){return{all:e||=new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(e){e(n)}),(r=e.get(`*`))&&r.slice().map(function(e){e(t,n)})}}}const n=t(),r={emit(e,t){n.emit(e,t)},on(e,t){n.on(e,t)},once(e,t){let r=i=>{t(i),n.off(e,r)};n.on(e,r)},off(e,t){t?n.off(e,t):n.off(e)},clear(){n.all.clear()}};function i(){let t=new Map;function n(e,n){r.on(e,n),t.has(e)||t.set(e,[]),t.get(e).push(n)}function i(e,t){r.once(e,t)}function a(e,t){r.emit(e,t)}function o(e,n){if(r.off(e,n),n&&t.has(e)){let r=t.get(e),i=r.indexOf(n);i>-1&&r.splice(i,1)}}function s(){t.forEach((e,t)=>{e.forEach(e=>{r.off(t,e)})}),t.clear()}return e(()=>{s()}),{on:n,once:i,emit:a,off:o,cleanup:s}}export{r as n,t as r,i as t};