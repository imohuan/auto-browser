import{F as e,M as t,bt as n,et as r,j as i}from"./index-B7qcHONN.js";import{n as a}from"./events-DYHBDbVc.js";import{t as o}from"./_plugin-vue_export-helper-DEnkkObV.js";var s={},c={t:`1761820393760`,class:`icon`,viewBox:`0 0 1024 1024`,version:`1.1`,xmlns:`http://www.w3.org/2000/svg`,"p-id":`15758`,width:`200`,height:`200`};function l(n,i){return r(),e(`svg`,c,[...i[0]||=[t(`path`,{d:`M320.512 256h92.48v46.08h-92.48V256z m469.184 113.504h46.72v46.08h-46.72v-46.08z m46.72 46.08h46.08V739.52h-46.08V415.584zM790.304 739.52h46.08v139.2h-46.08v-139.2z m-46.08 232.32H373.056v-93.12h-46.08v139.2h463.296v-139.2h-46.08v93.12z m-463.328-185.28h46.08v92.16h-46.08v-92.16z m-46.08-92.224h46.08v92.192h-46.08v-92.192z m-46.112-92.192h46.08v92.16h-46.08v-92.16z m-46.08-48.416h46.08v48.416h-46.08v-48.416z m155.68-59.2v-46.08H188.928l-46.336 105.28h46.336l25.216-59.2h84.16z`,fill:`#515151`,"p-id":`15759`},null,-1),t(`path`,{d:`M280.896 476.608v172.8h46.08V302.08h-46.08v174.464z m184.704-13.6V277.312h92.992V231.2H465.6v6.912h-46.08v224.896h46.08z m139.104 0v-139.616h92.8v-46.08h-138.88v185.696h46.08z m138.88 45.984v-139.52h46.112v-46.08h-92.192v185.6h46.08z`,fill:`#515151`,"p-id":`15760`},null,-1)]])}var u=o(s,[[`render`,l]]);function d(e={}){let{dragThreshold:t=5,eventName:r=`editable-drop`,enableHighlight:o=!1,onDragStart:s,onDragEnd:c}=e,l=n(!1),u=n(!1),d=n({x:0,y:0}),f=n({x:0,y:0}),p=n(`default`),m=n(null),h=n(!1),g=null;function _(e){return e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement?e.value:e.textContent?.replace(/\u00a0/g,` `).replace(/\u200B/g,``)||``}let v=[],y=`border-green-600!`,b=()=>{v.forEach(e=>{e.classList.remove(y)}),v.length=0},x=e=>{let t=e.closest(`.variable-text-input`);b(),t&&!v.includes(t)&&(v.push(t),t.classList.add(y))},S=i(()=>{let e=m.value;if(e&&p.value===`empty`){x(e);let t=e.getBoundingClientRect();return{left:t.left-8+`px`,top:t.top+t.height/2+`px`,transform:`translate(12px, -50%)`}}return e&&p.value===`hasContent`?(x(e),{left:d.value.x+`px`,top:d.value.y+`px`}):(b(),{left:d.value.x+`px`,top:d.value.y+`px`,transform:`translate(-50%, -100%)`})});function C(e){if(!l.value)return;d.value={x:e.clientX,y:e.clientY};let n=e.clientX-f.value.x,r=e.clientY-f.value.y;if(Math.sqrt(n*n+r*r)>t)u.value?g&&a.emit(`variable:drag-move`,{data:g,position:d.value}):(u.value=!0,document.body.style.cursor=`grabbing`,g&&a.emit(`variable:drag-start`,{data:g,position:d.value}));else return;let i=document.elementFromPoint(e.clientX,e.clientY);if(!i){p.value=`default`,m.value=null;return}let o=i.getAttribute(`contenteditable`)===`true`||i instanceof HTMLInputElement||i instanceof HTMLTextAreaElement,s=null;if(o)s=i;else{let e=i.closest(`[contenteditable='true']`);if(!e){p.value=`default`,m.value=null;return}s=e}m.value=s,p.value=_(s).trim()===``?`empty`:`hasContent`}function w(e){if(!l.value)return;let t={x:e.clientX,y:e.clientY};a.emit(`variable:drag-end`,{data:g,position:t}),b(),l.value=!1,u.value=!1,p.value=`default`,m.value=null,o&&(h.value=!1),document.body.style.cursor=``,document.removeEventListener(`mousemove`,C),document.removeEventListener(`mouseup`,w);let n=document.elementFromPoint(e.clientX,e.clientY);if(n&&g){let e=new CustomEvent(r,{bubbles:!0,detail:g});n.dispatchEvent(e)}c&&c(g),g=null}function T(e,t){e.preventDefault(),e.stopPropagation(),l.value=!0,u.value=!1,p.value=`default`,m.value=null,o&&(h.value=!0),f.value={x:e.clientX,y:e.clientY},d.value={x:e.clientX,y:e.clientY},g=t,s&&s(t),document.addEventListener(`mousemove`,C),document.addEventListener(`mouseup`,w)}function E(){b(),l.value=!1,u.value=!1,p.value=`default`,m.value=null,o&&(h.value=!1),g=null,document.body.style.cursor=``,document.removeEventListener(`mousemove`,C),document.removeEventListener(`mouseup`,w)}return{isDragging:l,showDragFollower:u,dragPosition:d,dropTargetState:p,currentEditableElement:m,isHighlighted:o?h:void 0,dragFollowerStyle:S,startDrag:T,reset:E}}export{u as n,d as t};