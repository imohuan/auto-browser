<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è‡ªåŠ¨åŒ–æµ‹è¯•é¡µé¢</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
  </style>
</head>

<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen p-8">
  <div class="max-w-4xl mx-auto">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
      <h1 class="text-3xl font-bold text-indigo-600 mb-2">ğŸ§ª è‡ªåŠ¨åŒ–æµ‹è¯•é¡µé¢</h1>
      <p class="text-gray-600">æ­¤é¡µé¢åŒ…å«å„ç§ HTML å…ƒç´ ï¼Œç”¨äºæµ‹è¯•æµè§ˆå™¨è‡ªåŠ¨åŒ–åŠŸèƒ½</p>
    </div>

    <!-- è¡¨å•åŒºåŸŸ -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">ğŸ“ è¡¨å•æµ‹è¯•</h2>

      <form id="testForm" class="space-y-4">
        <!-- æ–‡æœ¬è¾“å…¥æ¡† -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">ç”¨æˆ·å</label>
          <input type="text" id="username" name="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" />
        </div>

        <!-- å¯†ç è¾“å…¥æ¡† -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">å¯†ç </label>
          <input type="password" id="password" name="password" placeholder="è¯·è¾“å…¥å¯†ç "
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" />
        </div>

        <!-- é‚®ç®±è¾“å…¥æ¡† -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">é‚®ç®±</label>
          <input type="email" id="email" name="email" placeholder="example@email.com"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" />
        </div>

        <!-- ä¸‹æ‹‰é€‰æ‹©æ¡† -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">é€‰æ‹©åŸå¸‚</label>
          <select id="city" name="city"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
            <option value="">è¯·é€‰æ‹©</option>
            <option value="beijing">åŒ—äº¬</option>
            <option value="shanghai">ä¸Šæµ·</option>
            <option value="guangzhou">å¹¿å·</option>
            <option value="shenzhen">æ·±åœ³</option>
          </select>
        </div>

        <!-- å•é€‰æ¡† -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">æ€§åˆ«</label>
          <div class="flex gap-4">
            <label class="flex items-center">
              <input type="radio" name="gender" value="male" class="mr-2">
              <span>ç”·</span>
            </label>
            <label class="flex items-center">
              <input type="radio" name="gender" value="female" class="mr-2">
              <span>å¥³</span>
            </label>
          </div>
        </div>

        <!-- å¤é€‰æ¡† -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">å…´è¶£çˆ±å¥½</label>
          <div class="grid grid-cols-2 gap-2">
            <label class="flex items-center">
              <input type="checkbox" id="hobby-reading" name="hobby" value="reading" class="mr-2">
              <span>é˜…è¯»</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" id="hobby-music" name="hobby" value="music" class="mr-2">
              <span>éŸ³ä¹</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" id="hobby-sports" name="hobby" value="sports" class="mr-2">
              <span>è¿åŠ¨</span>
            </label>
            <label class="flex items-center">
              <input type="checkbox" id="hobby-travel" name="hobby" value="travel" class="mr-2">
              <span>æ—…æ¸¸</span>
            </label>
          </div>
        </div>

        <!-- æ–‡æœ¬åŸŸ -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">ä¸ªäººç®€ä»‹</label>
          <textarea id="bio" name="bio" rows="4" placeholder="è¯·è¾“å…¥ä¸ªäººç®€ä»‹..."
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
        </div>

        <!-- æ–‡ä»¶ä¸Šä¼  -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">æ–‡ä»¶ä¸Šä¼ </label>
          <input type="file" id="fileInput" name="file"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" />
          <div id="fileResult" class="mt-2 text-sm text-gray-600"></div>
        </div>

        <!-- æäº¤æŒ‰é’® -->
        <div class="flex gap-3">
          <button type="submit" id="submitBtn"
            class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-lg transition">
            æäº¤è¡¨å•
          </button>
          <button type="reset" id="resetBtn"
            class="flex-1 bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded-lg transition">
            é‡ç½®è¡¨å•
          </button>
        </div>
      </form>
    </div>

    <!-- æŒ‰é’®æµ‹è¯•åŒºåŸŸ -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">ğŸ”˜ æŒ‰é’®æµ‹è¯•</h2>
      <div class="grid grid-cols-3 gap-3">
        <button id="btn-1" class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition">
          æŒ‰é’® 1
        </button>
        <button id="btn-2" class="bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg transition">
          æŒ‰é’® 2
        </button>
        <button id="btn-3" class="bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg transition">
          æŒ‰é’® 3
        </button>
        <button id="btn-4" class="bg-yellow-500 hover:bg-yellow-600 text-white py-2 px-4 rounded-lg transition">
          æŒ‰é’® 4
        </button>
        <button id="btn-5" class="bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded-lg transition">
          æŒ‰é’® 5
        </button>
        <button id="btn-6" class="bg-pink-500 hover:bg-pink-600 text-white py-2 px-4 rounded-lg transition">
          æŒ‰é’® 6
        </button>
      </div>
    </div>

    <!-- æœç´¢æµ‹è¯•åŒºåŸŸ -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">ğŸ” æœç´¢æµ‹è¯•</h2>
      <div class="flex gap-2">
        <input type="text" id="searchInput" placeholder="è¾“å…¥æœç´¢å†…å®¹..."
          class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" />
        <button id="searchBtn"
          class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-6 rounded-lg transition">
          æœç´¢
        </button>
      </div>
      <div id="searchResult" class="mt-3 text-sm text-gray-600"></div>
    </div>

    <!-- åˆ—è¡¨æµ‹è¯•åŒºåŸŸ -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">ğŸ“‹ åˆ—è¡¨æµ‹è¯•</h2>
      <ul id="itemList" class="space-y-2">
        <li class="item flex items-center justify-between p-3 bg-gray-50 rounded-lg">
          <span>åˆ—è¡¨é¡¹ 1</span>
          <button
            class="delete-btn bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm transition">åˆ é™¤</button>
        </li>
        <li class="item flex items-center justify-between p-3 bg-gray-50 rounded-lg">
          <span>åˆ—è¡¨é¡¹ 2</span>
          <button
            class="delete-btn bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm transition">åˆ é™¤</button>
        </li>
        <li class="item flex items-center justify-between p-3 bg-gray-50 rounded-lg">
          <span>åˆ—è¡¨é¡¹ 3</span>
          <button
            class="delete-btn bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm transition">åˆ é™¤</button>
        </li>
      </ul>
      <button id="addItemBtn" class="mt-3 bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg transition">
        æ·»åŠ åˆ—è¡¨é¡¹
      </button>
    </div>

    <!-- å¯¹è¯æ¡†æµ‹è¯• -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">ğŸ’¬ å¯¹è¯æ¡†æµ‹è¯•</h2>
      <div class="flex gap-3">
        <button id="alertBtn" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition">
          Alert å¯¹è¯æ¡†
        </button>
        <button id="confirmBtn"
          class="flex-1 bg-orange-500 hover:bg-orange-600 text-white py-2 px-4 rounded-lg transition">
          Confirm å¯¹è¯æ¡†
        </button>
        <button id="promptBtn"
          class="flex-1 bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded-lg transition">
          Prompt å¯¹è¯æ¡†
        </button>
      </div>
    </div>

    <!-- å†…å®¹æå–æµ‹è¯• -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">ğŸ“„ å†…å®¹æå–æµ‹è¯•</h2>

      <!-- æµ‹è¯•æ–‡ç« å†…å®¹ -->
      <article id="testArticle" class="mb-6 p-4 bg-blue-50 rounded-lg">
        <h3 class="text-lg font-bold mb-3">æµ‹è¯•æ–‡ç« æ ‡é¢˜ï¼šElectron è‡ªåŠ¨åŒ–æµ‹è¯•æŒ‡å—</h3>
        <div class="text-sm text-gray-600 mb-2">
          ä½œè€…ï¼šæµ‹è¯•ä½œè€… | å‘å¸ƒæ—¶é—´ï¼š2025-10-31
        </div>
        <p class="mb-3 leading-relaxed">
          è¿™æ˜¯ä¸€ç¯‡ç”¨äºæµ‹è¯• Readability å†…å®¹æå–åŠŸèƒ½çš„ç¤ºä¾‹æ–‡ç« ã€‚Readability æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å†…å®¹æå–åº“ï¼Œ
          èƒ½å¤Ÿä»ç½‘é¡µä¸­æ™ºèƒ½æå–ä¸»è¦å†…å®¹ï¼Œå»é™¤å¹¿å‘Šã€å¯¼èˆªç­‰å¹²æ‰°å…ƒç´ ã€‚
        </p>
        <p class="mb-3 leading-relaxed">
          åœ¨ Electron åº”ç”¨ä¸­é›†æˆ Readabilityï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°å¤„ç†ç½‘é¡µå†…å®¹ï¼Œæå–æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚
          è¿™å¯¹äºæ„å»ºè‡ªåŠ¨åŒ–å·¥å…·ã€æ•°æ®é‡‡é›†å·¥å…·ç­‰åœºæ™¯éå¸¸æœ‰ç”¨ã€‚
        </p>
        <h4 class="text-base font-semibold mb-2 mt-4">ä¸»è¦åŠŸèƒ½ç‰¹ç‚¹</h4>
        <ul class="list-disc list-inside space-y-1 mb-3">
          <li>æ™ºèƒ½è¯†åˆ«æ–‡ç« ä¸»ä½“å†…å®¹</li>
          <li>è‡ªåŠ¨æå–æ ‡é¢˜ã€ä½œè€…ç­‰å…ƒæ•°æ®</li>
          <li>å»é™¤å¹¿å‘Šå’Œæ— å…³å†…å®¹</li>
          <li>æ”¯æŒå¤šè¯­è¨€ç½‘é¡µå¤„ç†</li>
        </ul>
        <p class="leading-relaxed">
          é€šè¿‡æœ¬æµ‹è¯•é¡µé¢ï¼Œæ‚¨å¯ä»¥éªŒè¯å„ç§å†…å®¹æå–åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚
        </p>
      </article>

      <div class="flex gap-3">
        <button id="testReadabilityBtn"
          class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition">
          æµ‹è¯• Readability æå–
        </button>
        <button id="testMetadataBtn"
          class="flex-1 bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded-lg transition">
          æå–å…ƒæ•°æ®
        </button>
        <button id="testHtmlBtn"
          class="flex-1 bg-teal-500 hover:bg-teal-600 text-white py-2 px-4 rounded-lg transition">
          æå– HTML
        </button>
      </div>
    </div>

    <!-- ç½‘ç»œè¯·æ±‚æµ‹è¯• -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">ğŸŒ ç½‘ç»œè¯·æ±‚æµ‹è¯•</h2>

      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700 mb-2">API åœ°å€</label>
        <input type="text" id="apiUrl" value="https://jsonplaceholder.typicode.com/posts/1"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" />
      </div>

      <div class="flex gap-3 mb-4">
        <button id="testGetRequestBtn"
          class="flex-1 bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg transition">
          GET è¯·æ±‚
        </button>
        <button id="testPostRequestBtn"
          class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition">
          POST è¯·æ±‚
        </button>
        <button id="testMultipleRequestsBtn"
          class="flex-1 bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded-lg transition">
          æ‰¹é‡è¯·æ±‚
        </button>
      </div>

      <div id="networkResult" class="bg-gray-50 rounded-lg p-4 text-sm text-gray-600 min-h-[80px]">
        ç­‰å¾…ç½‘ç»œè¯·æ±‚...
      </div>
    </div>

    <!-- ç½‘ç»œæ•è·æµ‹è¯• -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">ğŸ“¡ ç½‘ç»œæ•è·æµ‹è¯•</h2>

      <div class="flex gap-3 mb-4">
        <button id="startCaptureBtn"
          class="flex-1 bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg transition">
          å¼€å§‹æ•è·
        </button>
        <button id="stopCaptureBtn"
          class="flex-1 bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg transition">
          åœæ­¢æ•è·
        </button>
        <button id="triggerRequestsBtn"
          class="flex-1 bg-yellow-500 hover:bg-yellow-600 text-white py-2 px-4 rounded-lg transition">
          è§¦å‘æµ‹è¯•è¯·æ±‚
        </button>
      </div>

      <div id="captureResult" class="bg-gray-50 rounded-lg p-4 text-sm text-gray-600 min-h-[80px]">
        ç½‘ç»œæ•è·æœªå¯åŠ¨
      </div>
    </div>

    <!-- æ“ä½œç»“æœæ˜¾ç¤º -->
    <div class="bg-white rounded-lg shadow-lg p-6">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">ğŸ“Š æ“ä½œç»“æœ</h2>
      <div id="resultArea" class="bg-gray-50 rounded-lg p-4 min-h-[100px] text-sm text-gray-600">
        ç­‰å¾…æ“ä½œ...
      </div>
    </div>
  </div>

  <script>
    // è¡¨å•æäº¤
    document.getElementById('testForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const data = Object.fromEntries(formData);
      showResult('è¡¨å•æäº¤æˆåŠŸï¼', data);
    });

    // æŒ‰é’®ç‚¹å‡»
    document.querySelectorAll('[id^="btn-"]').forEach(btn => {
      btn.addEventListener('click', () => {
        showResult(`ç‚¹å‡»äº† ${btn.textContent}`);
      });
    });

    // æœç´¢
    document.getElementById('searchBtn').addEventListener('click', () => {
      const keyword = document.getElementById('searchInput').value;
      document.getElementById('searchResult').textContent = keyword ? `æœç´¢: "${keyword}"` : 'è¯·è¾“å…¥æœç´¢å†…å®¹';
      showResult(`æ‰§è¡Œæœç´¢: ${keyword || '(ç©º)'}`);
    });

    // æ·»åŠ åˆ—è¡¨é¡¹
    let itemCount = 3;
    document.getElementById('addItemBtn').addEventListener('click', () => {
      itemCount++;
      const list = document.getElementById('itemList');
      const li = document.createElement('li');
      li.className = 'item flex items-center justify-between p-3 bg-gray-50 rounded-lg';
      li.innerHTML = `
        <span>åˆ—è¡¨é¡¹ ${itemCount}</span>
        <button class="delete-btn bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm transition">åˆ é™¤</button>
      `;
      list.appendChild(li);
      showResult(`æ·»åŠ äº†åˆ—è¡¨é¡¹ ${itemCount}`);

      // æ·»åŠ åˆ é™¤äº‹ä»¶
      li.querySelector('.delete-btn').addEventListener('click', () => {
        li.remove();
        showResult(`åˆ é™¤äº†åˆ—è¡¨é¡¹`);
      });
    });

    // åˆ é™¤åˆ—è¡¨é¡¹
    document.querySelectorAll('.delete-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        btn.closest('li').remove();
        showResult('åˆ é™¤äº†åˆ—è¡¨é¡¹');
      });
    });

    // æ–‡ä»¶ä¸Šä¼ 
    document.getElementById('fileInput').addEventListener('change', (e) => {
      const files = e.target.files;
      if (files.length > 0) {
        const fileName = files[0].name;
        const fileSize = (files[0].size / 1024).toFixed(2);
        document.getElementById('fileResult').textContent = `å·²é€‰æ‹©: ${fileName} (${fileSize} KB)`;
        showResult(`æ–‡ä»¶é€‰æ‹©æˆåŠŸ: ${fileName}`);
      }
    });

    // å¯¹è¯æ¡†
    document.getElementById('alertBtn').addEventListener('click', () => {
      alert('è¿™æ˜¯ä¸€ä¸ª Alert å¯¹è¯æ¡†ï¼');
      showResult('æ˜¾ç¤ºäº† Alert å¯¹è¯æ¡†');
    });

    document.getElementById('confirmBtn').addEventListener('click', () => {
      const result = confirm('ç¡®è®¤æ‰§è¡Œæ­¤æ“ä½œå—ï¼Ÿ');
      showResult(`Confirm å¯¹è¯æ¡† - ç”¨æˆ·é€‰æ‹©: ${result ? 'ç¡®è®¤' : 'å–æ¶ˆ'}`);
    });

    document.getElementById('promptBtn').addEventListener('click', () => {
      const result = prompt('è¯·è¾“å…¥æ‚¨çš„åå­—:');
      showResult(`Prompt å¯¹è¯æ¡† - ç”¨æˆ·è¾“å…¥: ${result || '(å–æ¶ˆ)'}`);
    });

    // æ˜¾ç¤ºç»“æœ
    function showResult(message, data = null) {
      const resultArea = document.getElementById('resultArea');
      const time = new Date().toLocaleTimeString('zh-CN');
      let html = `<div class="mb-2"><span class="text-indigo-600 font-medium">[${time}]</span> ${message}</div>`;

      if (data) {
        html += `<pre class="bg-gray-100 p-2 rounded text-xs overflow-auto">${JSON.stringify(data, null, 2)}</pre>`;
      }

      resultArea.innerHTML = html + resultArea.innerHTML;
    }

    // å†…å®¹æå–æµ‹è¯•
    document.getElementById('testReadabilityBtn').addEventListener('click', async () => {
      showResult('å¼€å§‹ Readability å†…å®¹æå–æµ‹è¯•...');
      try {
        if (window.__browserHelpers && window.__browserHelpers.getTextContent) {
          const result = window.__browserHelpers.getTextContent();
          if (result.success) {
            showResult('âœ… Readability æå–æˆåŠŸï¼', {
              textLength: result.textContent?.length || 0,
              title: result.article?.title || 'æœªçŸ¥',
              byline: result.article?.byline || 'æœªçŸ¥',
              excerpt: result.article?.excerpt?.substring(0, 100) || 'æ— '
            });
          } else {
            showResult('âŒ æå–å¤±è´¥: ' + (result.error || 'æœªçŸ¥é”™è¯¯'));
          }
        } else {
          showResult('âš ï¸ browser-helpers æœªåŠ è½½æˆ–æ–¹æ³•ä¸å­˜åœ¨');
        }
      } catch (error) {
        showResult('âŒ æµ‹è¯•å‡ºé”™: ' + error.message);
      }
    });

    document.getElementById('testMetadataBtn').addEventListener('click', async () => {
      showResult('å¼€å§‹æå–å…ƒæ•°æ®...');
      try {
        if (window.__browserHelpers && window.__browserHelpers.extractPageMetadata) {
          const metadata = window.__browserHelpers.extractPageMetadata();
          showResult('âœ… å…ƒæ•°æ®æå–æˆåŠŸï¼', metadata);
        } else {
          showResult('âš ï¸ browser-helpers æœªåŠ è½½æˆ–æ–¹æ³•ä¸å­˜åœ¨');
        }
      } catch (error) {
        showResult('âŒ æµ‹è¯•å‡ºé”™: ' + error.message);
      }
    });

    document.getElementById('testHtmlBtn').addEventListener('click', async () => {
      showResult('å¼€å§‹æå– HTML å†…å®¹...');
      try {
        if (window.__browserHelpers && window.__browserHelpers.getHtmlContent) {
          const result = window.__browserHelpers.getHtmlContent('#testArticle');
          if (result.success) {
            showResult('âœ… HTML æå–æˆåŠŸï¼', {
              htmlLength: result.htmlContent?.length || 0,
              preview: result.htmlContent?.substring(0, 200) + '...'
            });
          } else {
            showResult('âŒ æå–å¤±è´¥: ' + (result.error || 'æœªçŸ¥é”™è¯¯'));
          }
        } else {
          showResult('âš ï¸ browser-helpers æœªåŠ è½½æˆ–æ–¹æ³•ä¸å­˜åœ¨');
        }
      } catch (error) {
        showResult('âŒ æµ‹è¯•å‡ºé”™: ' + error.message);
      }
    });

    // ç½‘ç»œè¯·æ±‚æµ‹è¯•
    function showNetworkResult(message, data = null) {
      const resultArea = document.getElementById('networkResult');
      const time = new Date().toLocaleTimeString('zh-CN');
      let html = `<div class="mb-2"><span class="text-green-600 font-medium">[${time}]</span> ${message}</div>`;
      if (data) {
        html += `<pre class="bg-gray-100 p-2 rounded text-xs overflow-auto">${JSON.stringify(data, null, 2)}</pre>`;
      }
      resultArea.innerHTML = html + resultArea.innerHTML;
    }

    document.getElementById('testGetRequestBtn').addEventListener('click', async () => {
      const url = document.getElementById('apiUrl').value;
      showNetworkResult(`å‘é€ GET è¯·æ±‚: ${url}`);
      try {
        if (window.__browserHelpers && window.__browserHelpers.sendNetworkRequest) {
          const result = window.__browserHelpers.sendNetworkRequest(url, 'GET', null, null, 30000);
          if (result.success) {
            showNetworkResult('âœ… è¯·æ±‚æˆåŠŸ', {
              status: result.response.status,
              statusText: result.response.statusText,
              bodyPreview: JSON.stringify(result.response.body).substring(0, 200)
            });
          } else {
            showNetworkResult('âŒ è¯·æ±‚å¤±è´¥: ' + result.error);
          }
        } else {
          showNetworkResult('âš ï¸ browser-helpers æœªåŠ è½½');
        }
      } catch (error) {
        showNetworkResult('âŒ æµ‹è¯•å‡ºé”™: ' + error.message);
      }
    });

    document.getElementById('testPostRequestBtn').addEventListener('click', async () => {
      const url = document.getElementById('apiUrl').value;
      const postData = JSON.stringify({ title: 'æµ‹è¯•æ ‡é¢˜', body: 'æµ‹è¯•å†…å®¹', userId: 1 });
      showNetworkResult(`å‘é€ POST è¯·æ±‚: ${url}`);
      try {
        if (window.__browserHelpers && window.__browserHelpers.sendNetworkRequest) {
          const result = window.__browserHelpers.sendNetworkRequest(
            url, 'POST',
            { 'Content-Type': 'application/json' },
            postData,
            30000
          );
          if (result.success) {
            showNetworkResult('âœ… POST è¯·æ±‚æˆåŠŸ', {
              status: result.response.status,
              responseBody: result.response.body
            });
          } else {
            showNetworkResult('âŒ è¯·æ±‚å¤±è´¥: ' + result.error);
          }
        } else {
          showNetworkResult('âš ï¸ browser-helpers æœªåŠ è½½');
        }
      } catch (error) {
        showNetworkResult('âŒ æµ‹è¯•å‡ºé”™: ' + error.message);
      }
    });

    document.getElementById('testMultipleRequestsBtn').addEventListener('click', async () => {
      showNetworkResult('å¼€å§‹æ‰¹é‡è¯·æ±‚æµ‹è¯•...');
      const urls = [
        'https://jsonplaceholder.typicode.com/posts/1',
        'https://jsonplaceholder.typicode.com/users/1',
        'https://jsonplaceholder.typicode.com/comments/1'
      ];

      for (const url of urls) {
        try {
          if (window.__browserHelpers && window.__browserHelpers.sendNetworkRequest) {
            const result = window.__browserHelpers.sendNetworkRequest(url, 'GET', null, null, 30000);
            if (result.success) {
              showNetworkResult(`âœ… ${url} - ${result.response.status}`);
            }
          }
          await new Promise(r => setTimeout(r, 500)); // å»¶è¿Ÿ 500ms
        } catch (error) {
          showNetworkResult(`âŒ ${url} - ${error.message}`);
        }
      }
      showNetworkResult('æ‰¹é‡è¯·æ±‚å®Œæˆ');
    });

    // ç½‘ç»œæ•è·æµ‹è¯•
    function showCaptureResult(message, data = null) {
      const resultArea = document.getElementById('captureResult');
      const time = new Date().toLocaleTimeString('zh-CN');
      let html = `<div class="mb-2"><span class="text-blue-600 font-medium">[${time}]</span> ${message}</div>`;
      if (data) {
        html += `<pre class="bg-gray-100 p-2 rounded text-xs overflow-auto max-h-40">${JSON.stringify(data, null, 2)}</pre>`;
      }
      resultArea.innerHTML = html + resultArea.innerHTML;
    }

    document.getElementById('startCaptureBtn').addEventListener('click', async () => {
      showCaptureResult('å¼€å§‹ç½‘ç»œæ•è·...');
      try {
        if (window.electronAPI && window.electronAPI.invoke) {
          const result = await window.electronAPI.invoke('network:startDebuggerCapture', {
            maxCaptureTime: 180000,
            inactivityTimeout: 60000,
            includeStatic: false
          });
          if (result.success) {
            showCaptureResult(`âœ… ç½‘ç»œæ•è·å·²å¯åŠ¨ (æœ€å¤§ ${result.maxRequests} ä¸ªè¯·æ±‚)`);
          } else {
            showCaptureResult('âŒ å¯åŠ¨å¤±è´¥: ' + result.message);
          }
        } else {
          showCaptureResult('âš ï¸ electronAPI æœªåŠ è½½');
        }
      } catch (error) {
        showCaptureResult('âŒ æ“ä½œå¤±è´¥: ' + error.message);
      }
    });

    document.getElementById('stopCaptureBtn').addEventListener('click', async () => {
      showCaptureResult('åœæ­¢ç½‘ç»œæ•è·...');
      try {
        if (window.electronAPI && window.electronAPI.invoke) {
          const result = await window.electronAPI.invoke('network:stopDebuggerCapture');
          if (result.success) {
            showCaptureResult(`âœ… æ•è·å®Œæˆ: ${result.requestCount} ä¸ªè¯·æ±‚`, {
              duration: `${(result.totalDurationMs / 1000).toFixed(1)}s`,
              stoppedBy: result.stoppedBy,
              requestCount: result.requestCount
            });
            // æ˜¾ç¤ºå‰ 3 ä¸ªè¯·æ±‚
            if (result.requests && result.requests.length > 0) {
              const summary = result.requests.slice(0, 3).map(r =>
                `${r.method} ${r.url.substring(0, 50)}...`
              );
              showCaptureResult('æ•è·çš„è¯·æ±‚ï¼ˆå‰3ä¸ªï¼‰:', summary);
            }
          } else {
            showCaptureResult('âŒ åœæ­¢å¤±è´¥: ' + result.message);
          }
        } else {
          showCaptureResult('âš ï¸ electronAPI æœªåŠ è½½');
        }
      } catch (error) {
        showCaptureResult('âŒ æ“ä½œå¤±è´¥: ' + error.message);
      }
    });

    document.getElementById('triggerRequestsBtn').addEventListener('click', async () => {
      showCaptureResult('è§¦å‘æµ‹è¯•è¯·æ±‚...');
      const urls = [
        'https://jsonplaceholder.typicode.com/posts/1',
        'https://jsonplaceholder.typicode.com/users/1'
      ];

      for (const url of urls) {
        try {
          if (window.__browserHelpers && window.__browserHelpers.sendNetworkRequest) {
            window.__browserHelpers.sendNetworkRequest(url, 'GET', null, null, 30000);
            showCaptureResult(`ğŸ“¤ è§¦å‘è¯·æ±‚: ${url}`);
          }
          await new Promise(r => setTimeout(r, 300));
        } catch (error) {
          showCaptureResult(`âŒ è§¦å‘å¤±è´¥: ${error.message}`);
        }
      }
    });

    // é¡µé¢åŠ è½½å®Œæˆ
    window.addEventListener('load', () => {
      showResult('é¡µé¢åŠ è½½å®Œæˆï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•äº†ï¼');
      // æ£€æŸ¥åŠŸèƒ½å¯ç”¨æ€§
      if (window.__browserHelpers) {
        showResult('âœ… browser-helpers å·²åŠ è½½');
      }
      if (window.electronAPI) {
        showResult('âœ… electronAPI å·²åŠ è½½');
      }
    });
  </script>
</body>

</html>